define(["jquery","qtype_sc/jquery.form"],function(a){function b(a){f=a.val()}function c(b){var c=parseInt(b.val()),d=parseInt(f);c<d&&(confirm(g.warningreduceoptions)?(f=b.val(),a("input[name='updatebutton']").click()):b.val(f)),c>d&&(f=b.val(),a("input[name='updatebutton']").click())}function d(){for(var b=parseInt(a("#id_numberofrows").val()),c=1;c<=b;c++){var d=a("#id_option_"+c),e=d.val();if(e.replace("<br/>",""),e.replace("<p></p>",""),""==e)return!1}return!0}function e(b){if(!d())return void a("input[name='updatebutton']").click();var c=b.closest("form");if(c){var e=window.open(i,"PreviewQuestion","height=620,width=750");c.ajaxForm(function(a){e.location.href=h}),c.submit(),c.off()}}var f=null,g={},h=null,i=null;return{init:function(d,f,j){g=d,h=f,i=j;var k=a("#id_numberofrows");if(k.focus(function(){b(a(this))}),k.change(function(){c(a(this))}),h){var l=a("button[name='previewbutton']");l&&l.click(function(){e(a(this))});var m=a("input[name='previewbutton']");m&&m.click(function(){e(a(this))})}}}});