define(["jquery"],function(a){function b(b,c,d){var h=b.prop("id");d&&b.prop("checked")&&f(c,b.data("number"),!1);for(var i=a("table#questiontable"+c).find("input.optioncheckbox"),j=0;j<i.length;j++){var k=a(i[j]);k.prop("id")!==h&&(k.prop("checked",!1),d&&f(c,k.data("number"),!1))}if(d&&!b.prop("checked")&&e(c)&&g(c),b.prop("checked")){var l=a("table#questiontable"+c).find("#q"+c+"_optiontext"+b.data("number"));l&&l.removeClass("linethrough");var m=a("table#questiontable"+c).find("#q"+c+"_distractor"+b.data("number"));m&&m.prop("checked",!1)}}function c(c,j,k){var l=c.data("number"),m=a("table#questiontable"+j).find("span#q"+j+"_optiontext"+l);if(c.prop("checked")){k&&f(j,c.data("number"),!1),m&&m.addClass("linethrough");var n="q"+j+"_optionbutton"+l,o=a("#"+n);o&&o.prop("checked")&&b(o,j,k)}else m&&m.removeClass("linethrough");var p=i(j);if(null!==p){var q=a(p),r=q.data("number"),s="q"+j+"_optionbutton"+r,t=a("#"+s);t&&(t.prop("checked",!0),b(t,j,k))}k&&!d(j)&&(e(j)?g(j):h(j))}function d(b){for(var c=a("table#questiontable"+b).find("input.optioncheckbox"),d=!1,e=0;e<c.length&&!d;e++)d=c[e].checked;return d}function e(b){for(var c=a("table#questiontable"+b).find("input.distractorcheckbox"),d=0;d<c.length;d++)if(a(c[d]).prop("checked"))return!0;return!1}function f(b,c,d){var e=a("table#questiontable"+b).find('tr[class*="optionrow'+c+'"]');d?e.addClass("highlight"):e.removeClass("highlight")}function g(b){if(!i(b))for(var c=a("table#questiontable"+b).find("input.distractorcheckbox"),d=0;d<c.length;d++){var e=a(c[d]);e.prop("checked")||f(b,e.data("number"),!0)}}function h(b){for(var c=a("table#questiontable"+b).find('tr[class*="optionrow"]'),d=0;d<c.length;d++)a(c[d]).removeClass("highlight")}function i(b){for(var c=a("table#questiontable"+b).find("input.distractorcheckbox"),d=null,e=0,f=0;f<c.length;f++)c[f].checked?e++:d=c[f];return e!==c.length-1&&(d=null),d}return{init:function(f,h){for(var i=a("table#questiontable"+h).find("input.distractorcheckbox"),j=0;j<i.length;j++){var k=a(i[j]);k.change(function(){c(a(this),h,f)})}for(var l=a("table#questiontable"+h).find("input.optioncheckbox"),j=0;j<l.length;j++){var m=a(l[j]);m.change(function(){b(a(this),h,f)})}f&&!d(h)&&e(h)&&g(h)}}});