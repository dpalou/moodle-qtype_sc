{"version":3,"sources":["../src/question_edit.js"],"names":["define","$","change","numberofrowschanged","numberofrowsCur","parseInt","val","numberofrowsPre","numberofrowsMax","permission","differenceinrows","confirm","M","util","get_string","alert","hide","numberofrowsRendered","i","show","corretrow","j","is","prop","init"],"mappings":"AA0BAA,OAAM,0BAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAG3BA,CAAC,CAAC,gCAAD,CAAD,CAAkCC,MAAlC,CAAyC,UAAW,CAChDC,CAAmB,EACtB,CAFD,EAOA,QAASA,CAAAA,CAAT,EAA+B,IAGvBC,CAAAA,CAAe,CAAGC,QAAQ,CAACJ,CAAC,CAAC,gCAAD,CAAD,CAAkCK,GAAlC,EAAD,CAHH,CAIvBC,CAAe,CAAGF,QAAQ,CAACJ,CAAC,CAAC,kCAAD,CAAD,CAAoCK,GAApC,EAAD,CAJH,CAKvBE,CAAe,CAAG,CALK,CAMvBC,CAAU,GANa,CAS3B,GAAIF,CAAe,CAAGH,CAAtB,CAAuC,CACnC,GAAIM,CAAAA,CAAgB,CAAGH,CAAe,CAAGH,CAAzC,CAEA,GAAIO,OAAO,CAACC,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,mBAAlB,CAAuC,UAAvC,CAAmDJ,CAAnD,CAAD,CAAX,CAAmF,CAC/ED,CAAU,GACb,CAFD,IAEO,CACHA,CAAU,GAAV,CACA,GAAIF,CAAe,CAAGC,CAAtB,CAAuC,CAEnCD,CAAe,CAAGC,CAAlB,CACAO,KAAK,CAACH,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,qBAAlB,CAAyC,UAAzC,CAAqDJ,CAArD,CAAD,CACR,CACDT,CAAC,CAAC,gCAAD,CAAD,CAAkCK,GAAlC,CAAsCC,CAAtC,CACH,CACJ,CAGD,GAAIE,CAAJ,CAAgB,CACZR,CAAC,CAAC,kCAAD,CAAD,CAAoCK,GAApC,CAAwCF,CAAxC,EACAH,CAAC,CAAC,+BAAD,CAAD,CAAiCe,IAAjC,GAIA,OAFIC,CAAAA,CAAoB,CAAGb,CAAe,CAAGI,CAAlB,CAAoCJ,CAApC,CAAsDI,CAEjF,CAASU,CAAC,CAAG,CAAb,CAAgBA,CAAC,EAAID,CAArB,CAA2CC,CAAC,EAA5C,CAAgD,CAC5CjB,CAAC,CAAC,uBAAyBiB,CAA1B,CAAD,CAA8BC,IAA9B,EACH,CAED,GAAIZ,CAAe,CAAGH,CAAtB,CAAuC,CAEnC,OADIgB,CAAAA,CAAS,CAAG,CAChB,CAASC,CAAC,CAAG,CAAb,CAAgBA,CAAC,EAAIb,CAArB,CAAsCa,CAAC,EAAvC,CAA2C,CACvC,GAAIpB,CAAC,CAAC,kBAAoBoB,CAArB,CAAD,CAAyBC,EAAzB,CAA4B,UAA5B,CAAJ,CAA6C,CACzCF,CAAS,CAAGC,CACf,CACJ,CACD,GAAID,CAAS,CAAGhB,CAAhB,CAAiC,CAC7BW,KAAK,CAACH,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkB,mBAAlB,CAAuC,UAAvC,CAAD,CAAL,CACAb,CAAC,CAAC,kBAAD,CAAD,CAAsBsB,IAAtB,CAA2B,SAA3B,IACH,CACJ,CACJ,CAEJ,CACD,MAAO,CACHC,IAAI,CAAE,eAAW,CACbrB,CAAmB,EACtB,CAHE,CAKV,CAlEK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module      qtype_sc/question_edit.js\n * @author      Amr Hourani (amr.hourani@id.ethz.ch)\n * @author      Martin Hanusch (martin.hanusch@let.ethz.ch)\n * @author      JÃ¼rgen Zimmer (juergen.zimmer@edaktik.at)\n * @author      Andreas Hruska (andreas.hruska@edaktik.at)\n * @copyright   2018 ETHZ {@link http://ethz.ch/}\n * @copyright   2017 eDaktik GmbH {@link http://www.edaktik.at}\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n\n    // Setting up an Event listener.\n    $('select[id=\"id_numberofrows\"]').change(function() {\n        numberofrowschanged();\n    });\n\n    /**\n     * Events handles when number of rows is changed.\n     */\n    function numberofrowschanged() {\n\n        /* eslint-disable no-alert */\n        var numberofrowsCur = parseInt($('select[id=\"id_numberofrows\"]').val());\n        var numberofrowsPre = parseInt($('input[name=\"lastnumberofrows\"]').val());\n        var numberofrowsMax = 5;\n        var permission = true;\n\n        // Step1: Check if the number of rows has decreased. If true: Show prompts.\n        if (numberofrowsPre > numberofrowsCur) {\n            var differenceinrows = numberofrowsPre - numberofrowsCur;\n\n            if (confirm(M.util.get_string('deleterawswarning', 'qtype_sc', differenceinrows))) {\n                permission = true;\n            } else {\n                permission = false;\n                if (numberofrowsPre > numberofrowsMax) {\n\n                    numberofrowsPre = numberofrowsMax;\n                    alert(M.util.get_string('mustdeleteextrarows', 'qtype_sc', differenceinrows));\n                }\n                $('select[id=\"id_numberofrows\"]').val(numberofrowsPre);\n            }\n        }\n\n        // Step2: Update the DOM by adding or deleting the defined amount of optionboxes.\n        if (permission) {\n            $('input[name=\"lastnumberofrows\"]').val(numberofrowsCur);\n            $('[id^=\"optionbox_response_\"]').hide();\n\n            var numberofrowsRendered = numberofrowsCur < numberofrowsMax ? numberofrowsCur : numberofrowsMax;\n\n            for (var i = 1; i <= numberofrowsRendered; i++) {\n                $('#optionbox_response_' + i).show();\n            }\n\n            if (numberofrowsPre > numberofrowsCur) {\n                var corretrow = 1;\n                for (var j = 0; j <= numberofrowsMax; j++) {\n                    if ($('#id_correctrow_' + j).is(':checked')) {\n                        corretrow = j;\n                    }\n                }\n                if (corretrow > numberofrowsCur) {\n                    alert(M.util.get_string('correctvaluereset', 'qtype_sc'));\n                    $('#id_correctrow_1').prop('checked', true);\n                }\n            }\n        }\n        /* eslint-enable */\n    }\n    return {\n        init: function() {\n            numberofrowschanged();\n        }\n    };\n});"],"file":"question_edit.min.js"}